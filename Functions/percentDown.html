<!DOCTYPE html><html lang="en">  <head>    <meta charset="utf-8"></meta>    <link href="/FlipDBDoc/Functions.css" rel="stylesheet"></link>  </head>  <body>    <main>      <h1>percentDown</h1>      <p>Type:{.prefix}</p>      <p>Hybrid{.info}</p>      <p>Categories:{.prefix}</p>      <p>Arithmetic{.info}</p>      <p>Computes percentage of each group relative to all groups.{.purpose}</p>      <pre>        <code>R=[Y] percentDown X [B]</code>      </pre>      <p>X may be numeric or Char. B is an optional Boolean restriction      of X. Y is integer. R is the percentage of X where B relative to      the grand total of X. If X is character, the percentage is based      on row count. R is Float if Y is not provided. R is rounded to Integer      if Y is 0, else R is Decimal and rounded to Y decimal places.</p>      <p>This function has special handling when used in the context of      a cross-tab query.</p>      <p>B is generally omitted when percentDown is used under a cross-tab      query.</p>      <p>See also: →[percentAcross], →[percentOverall]</p>      <p>For numeric X, when B is not provided, this function is equivalent      to:</p>      <pre>        <code>Y round 100 * (sum X) / sum sum X</code>      </pre>      <p>For numeric X, when B is provided, this function is equivalent      to:</p>      <pre>        <code>Y round 100 * (sum X where B) / sum sum X</code>      </pre>      <p>For char X, when B is not provided, this function is equivalent      to:</p>      <pre>        <code>Y round 100 * (count X) / sum count X</code>      </pre>      <p>For char X, when B is provided, this function is equivalent to:</p>      <pre>        <code>Y round 100 * (count X where B) / sum count X</code>      </pre>      <h2>Examples</h2>      <pre>        <code>      a=enclose (100 100) (300) (200 50 250)      b=enclose (1 0) (1) (1 0 1)      a b ┌────────────┐  ┌───────┐ ↓[100,100]   │  ↓[1,0]  │ │[300]       │  │[1]    │ │[200,50,250]│  │[1,0,1]│ └Int16───────┘  └Boolean┘      percentDown a┌─────┐↓20   ││30   ││50   │└Float┘      percentDown a b┌─────┐↓10   ││30   ││45   │└Float┘      percentDown a (not b)┌─────┐↓10   ││ 0   ││ 5   │└Float┘</code>      </pre>    </main>  </body></html>
