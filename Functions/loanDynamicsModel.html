<!DOCTYPE html><html lang="en">  <head>    <meta charset="utf-8"></meta>    <base href="/FlipDBDoc"/>    <link href="/Functions.css" rel="stylesheet"></link>  </head>  <body>    <main>      <h1>loanDynamicsModel</h1>      <p>Type:{.prefix}</p>      <p>Misc{.info}</p>      <p>Categories:{.prefix}</p>      <p>Financial{.info}</p>      <p>Run the Andrew Davidson &amp; Co. (AD&amp;Co) Loan Dynamics Model      (LDM).{.purpose}</p>      <p>A license (and key) from AD&amp;Co is needed to use this function.</p>      <p>See also →[mortgageCashFlow], →[mortgageCashFlowYield], →[mortgageCashFlowPrice],      →[mortgageCashFlowPresentValue], →[smmToCPR]</p>      <pre>        <code>R=loanDynamicsModel X</code>      </pre>      <p>X is a property space containing appropriate inputs for LDM. R      is a property space containing all of the LDM outputs, and a Status      field provided by FlipDB.</p>      <p>Output from the loanDynamicsModel function may be used as inputs      for the mortgageCashFlow function.</p>      <p>This function will signal an error if FlipDB cannot initialize      or run the model for any reason, or if LDM fails for every loan due      to invalid or missing input. If the model runs successfully for some      loans, but fails on others, no error is signalled. The Status field      can be used to see which loans run and which do not.</p>      <p>This function may be used in ungrouped or grouped queries, providing      loan level or repline data respectively. If used in a grouped query,      then inputs must be aggregrated.</p>      <h2>Inputs The LoanDyamics model accepts many inputs. The minimum      of 6 inputs necessary to run the model are described here. See the      Ad-Co documentation for further details. In addition, FlipDB requires      a folder to be specied for the location of the LDM data files and      license key file. FlipDB also provides an optional input named OutputNames      for limiting the ADCO output.</h2>      <p>        1.        <strong>ADCOFolder</strong>      </p>      <p>This is the name of the folder that holds the LDM data files and      the license key file. It must contain a DataFile subfolder.</p>      <p>        1.        <strong>OutputNames</strong>      </p>      <p>A list of ADCO outputs to return. If not specified, or if an empty      list, all ADOC outputs are returned. Note that there are over 250      outputs, and if only a few are needed, it is worth explicitly specifying      them to improve performance.</p>      <p>        1.        <strong>FirstForecastYear</strong>      </p>      <p>An integer year.</p>      <p>        1.        <strong>FirstForecastMonth</strong>      </p>      <p>An integer month.</p>      <p>        1.        <strong>WacIsFixed</strong>      </p>      <p>A boolean, 1 for fixed, 0 for adjustable. (This is the opposite      of the Adjustable input of mortgageCashflow)</p>      <p>        1.        <strong>Age</strong>      </p>      <p>Integer. The age of the loan.</p>      <p>        1.        <strong>RemainingTerm</strong>      </p>      <p>Integer. The remaining term of the loan. (Corresponds to Term      in mortgageCashFlow inputs)</p>      <p>        1.        <strong>OriginalTerm</strong>      </p>      <p>Integer. The original amortization term of the loan.</p>      <p>Some AdCo inputs are time-varying. These must provided as enclosed      or partitioned columns. FlipDB will truncate or extend time-varying      inputs to correspond to the remaining term.</p>      <p>AdCo input names are not always valid FlipDB names. As of this      writing there are at least two: 2YrForecast and 10YrForecast. FlipDB      maps AdCo names with leading digits to valid FlipDB names by moving      the digits to the end of the name. So 2YrForecast is mapped to YrForecast2      and 10YrForecast is mapped to YrForecast10. The valid FlipDB names      should be used when specifying inputs. Similar issues arise with      output names. FlipDB converts them to valid FlipDB names in the same      way.</p>      <h2>Outputs The result of loanDynamicsModel is a property space containing      all of the outputs provided by LDM. In addition, FlipDB provides      an output named "Status" that reports 'OK' for a successful execution,      or an error message passed through from AD&amp;Co.</h2>      <p>With the exception of time series fields, which are adjusted to      correspond with first forecast year and month, FlipDB does not do      any transformation of the LDM outputs; they are passed through as      is. They may require some transformation in order to be properly      used as inputs to other FlipDB functions. See the AD&amp;Co documentation      for a full list and description of all of the outputs.</p>      <p>Some outputs are non time-varying per mortgage. Some outputs are      time-varying per mortgage (e.g. MDR and LossSeverity). If a single      loan is priced, the time-varying outputs are simple (a list) and      the non time-varying columns are scalar. If multiple loans are priced,      the time-varying output columns are partitioned (list of lists) and      the non time-varying outputs are simple.</p>      <p>Three of the primary outputs used as inputs to mortgageCashFlow      are:</p>      <p>        1.        <strong>MRR</strong>      </p>      <p>A time-series output used as PrepaymentRateScenario. MRR must      be annualized first using the →[smmToCPR] function.</p>      <p>        1.        <strong>MDR</strong>      </p>      <p>A time-series output used as DefaultRateScenario. MDR must be      annualized first using the →[smmToCPR] function.</p>      <p>        1.        <strong>LossSeverity</strong>      </p>      <p>A time-series output used as LossSeverity. LossSeverity is provided      in decimal form by LDM, and must by converted to a percentage (multiplied      by 100).</p>      <h3>Examples This example uses the minimum number of inputs to run      the model:</h3>      <pre>        <code>      P=newPropertySpace 0      P.ADCOFolder←='c:portsadcolipdb_adco'      P.FirstForecastYear=2012      P.FirstForecastMonth=9      P.WacIsFixed=1      P.OriginalTerm=359      P.RemainingTerm=321      P.Age=32      R=loanDynamicsModel P      R.Status┌───────┐│OK     │└Char(2)┘      R.MRR┌──────────────────┐↓0.0055354502023933││0.0057265627365561││0.0055034381344095││0.0057881061943596││0.0061031110323175││0.0060401808390437││0.0064250605675414││0.0067857262808221││0.008040201628693 ││0.0086951764088216││...               │└Float─────────────┘</code>      </pre>      <p>Building on the above example, we can specify a time series input.      Note that times series inputs must be enclosed (or partitioned when      running multiple loans). Note further that times series inputs are      automatically truncated or extended to correspond to the remaining      term:</p>      <pre>        <code>      P.YrForecast2=enclose  3 3.5 4 4.5 5 5.5 6 7      R=loanDynamicsModel P      R.YrForecast2┌─────┐↓3    ││3.5  ││4    ││4.5  ││5    ││5.5  ││6    ││7    ││7    ││7    ││...  │└Float┘</code>      </pre>    </main>  </body></html>
