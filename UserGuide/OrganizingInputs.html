<!DOCTYPE html><html lang="en">  <head>    <meta charset="utf-8"></meta>    <link href="/UserGuide.css" rel="stylesheet"></link>  </head>  <body>    <main>      <h1>Organizing Inputs</h1>      <p>Just as any large program, function, or script benefits from being      broken into smaller components, so too large expression sets benefit      by refactoring them into smaller expression sets. Expression sets      may be used to organize and modularize code using the →[*.evaluateExpressionSet]      function.</p>      <p>Consider the →[*.mortgageCashFlow] function, which takes dozens      of named inputs assembled in a single propertyspace. We might initially      design a single expression set to assemble the inputs, run the cashflows,      and then pick some outputs:</p>      <table>        <thead>          <tr>            <th class="center">Name</th>            <th class="center">Expression</th>            <th class="center">Hide</th>          </tr>        </thead>        <tbody>          <tr>            <td class="center">              <code>LoanNumber</code>            </td>            <td class="center">              <code>LoanID</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>BorrowerName</code>            </td>            <td class="center">              <code>BorrowerName</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn</code>            </td>            <td class="center">              <code>newPropertySpace ''</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn.Balance</code>            </td>            <td class="center">              <code>CurrentBalance</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn.Rate</code>            </td>            <td class="center">              <code>Coupon</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn.Term</code>            </td>            <td class="center">              <code>OriginalTerm - Age</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn.StatedYield</code>            </td>            <td class="center">              <code>3.125</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>...</code>            </td>            <td class="center">              <code>...</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowOut</code>            </td>            <td class="center">              <code>mortgageCashlow CashFlowIn</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>Price</code>            </td>            <td class="center">              <code>CashFlowOut.ComputedPrice</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>InterestOverLife</code>            </td>            <td class="center">              <code>sum CashFlowOut.CashFlow.Interest</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>        </tbody>      </table>      <p>It is useful to package the marshalling of all of these inputs      into it own expression set, separating it from the main outputs of      the expression set:</p>      <table>        <thead>          <tr>            <th class="center">Name</th>            <th class="center">Expression</th>            <th class="center">Hide</th>          </tr>        </thead>        <tbody>          <tr>            <td class="center">              <code>LoanNumber</code>            </td>            <td class="center">              <code>LoanID</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>BorrowerName</code>            </td>            <td class="center">              <code>BorrowerName</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowIn</code>            </td>            <td class="center">              <code>evaluateExpressionSet '/Objects/CashFlowInputs'</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>CashFlowOut</code>            </td>            <td class="center">              <code>mortgageCashFlow CashFlowIn</code>            </td>            <td class="center">              <code>1</code>            </td>          </tr>          <tr>            <td class="center">              <code>Price</code>            </td>            <td class="center">              <code>CashFlowOut.ComputedPrice</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>          <tr>            <td class="center">              <code>InterestOverLife</code>            </td>            <td class="center">              <code>sum CashFlowOut.CashFlow.Interest</code>            </td>            <td class="center">              <code>0</code>            </td>          </tr>        </tbody>      </table>      <p>        Where        <code>Objects/CashFlowInputs</code>        is defined as:      </p>      <table>        <thead>          <tr>            <th class="center">Name</th>            <th class="center">Expression</th>          </tr>        </thead>        <tbody>          <tr>            <td class="center">              <code>Arg</code>            </td>            <td class="center">              <code>newPropertySpace ''</code>            </td>          </tr>          <tr>            <td class="center">              <code>Arg.Balance</code>            </td>            <td class="center">              <code>CurrentBalance</code>            </td>          </tr>          <tr>            <td class="center">              <code>Arg.Rate</code>            </td>            <td class="center">              <code>Coupon</code>            </td>          </tr>          <tr>            <td class="center">              <code>Arg.Term</code>            </td>            <td class="center">              <code>OriginalTerm - Age</code>            </td>          </tr>          <tr>            <td class="center">              <code>Arg.StatedYield</code>            </td>            <td class="center">              <code>3.125</code>            </td>          </tr>          <tr>            <td class="center">              <code>...</code>            </td>            <td class="center">              <code>...</code>            </td>          </tr>          <tr>            <td class="center">              <code>I</code>            </td>            <td class="center">              <code>Arg</code>            </td>          </tr>        </tbody>      </table>      <p>        Note that evaluateExpressionSet returns the value of the last expression,        in this case the propertyspace named        <code>Arg</code>        . Thus there is need to provide a Hide column. In addition, the        name        <code>I</code>        on the last line is immaterial.      </p>    </main>  </body></html>
